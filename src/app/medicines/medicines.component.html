<app-header></app-header>

<div class="container">
  <div id="mainX" class="card card-body">
    <h3 class="titleX">Add New Medicine</h3>
    <div class="d-flex mb-3 justify-content-between">
      <input #newMember [(ngModel)]="app.newMedicineX" (keyup.enter)="app.addMember(newMember.value)" type="text" class="col-sm-7 form-control"
        id="newMemberX">
      <button class="col-sm-4 btn btn-dark" (click)="app.addMember(newMember.value)">Add Medicine</button>
    </div>

    <h3 class="titleX">Medicines</h3>
    <ul id="medicinesX" class="list-group">
      <li *ngFor="let medicine of app.medicines$ | async; let i = index" class="list-group-item form-inline">
        <span *ngIf="(app.editId == i) && app.editMedicineX; then showEdit else showMsg"></span>
        <ng-template #showMsg>{{ medicine.text }}</ng-template>
        <ng-template #showEdit>
          <input #updateText (keyup.enter)="app.updateMember(medicine.key, updateText.value)" (keyup.esc)="editMedicineX = false"
            type="text" class="form-control d-inline col-7" value="{{ medicine.text }}">
        </ng-template>
        <span *ngIf="authService.admin">
          <button class="deleteX btn btn-danger btn-sm float-right" (click)="app.deleteMember(medicine.key)">X</button>
          <button class="editX btn btn-danger btn-sm float-right mr-2" (click)="editMember(i)">Edit</button>          
        </span>
        <span *ngIf="!authService.admin">
          <button class="deleteX btn btn-success btn-sm float-right" (click)="app.deleteMember(medicine.key)">Add to Cart</button>
        </span>
      </li>
    </ul>
  </div>
</div>